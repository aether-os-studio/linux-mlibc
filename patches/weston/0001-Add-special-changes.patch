From 46c3c08efcd4288ce5ba63a017322deb22d0e266 Mon Sep 17 00:00:00 2001
From: lihanrui2913 <lihanrui20091103@126.com>
Date: Tue, 23 Dec 2025 20:20:33 +0800
Subject: [PATCH] Add special changes

Signed-off-by: lihanrui2913 <lihanrui20091103@126.com>
---
 libweston/backend-drm/drm.c |  4 ++--
 libweston/launcher-util.c   | 16 ++--------------
 protocol/meson.build        |  2 +-
 3 files changed, 5 insertions(+), 17 deletions(-)

diff --git a/libweston/backend-drm/drm.c b/libweston/backend-drm/drm.c
index 11a5c3d4..df3e1381 100644
--- a/libweston/backend-drm/drm.c
+++ b/libweston/backend-drm/drm.c
@@ -4009,13 +4009,13 @@ drm_backend_create(struct weston_compositor *compositor,
 			     &b->format) < 0)
 		goto err_compositor;
 
-	/* Check if we run drm-backend using a compatible launcher */
+	/* Check if we run drm-backend using a compatible launcher 
 	compositor->launcher = weston_launcher_connect(compositor, seat_id, true);
 	if (compositor->launcher == NULL) {
 		weston_log("fatal: your system should either provide the "
 			   "logind D-Bus API, or use seatd.\n");
 		goto err_compositor;
-	}
+	}*/
 
 	b->udev = udev_new();
 	if (b->udev == NULL) {
diff --git a/libweston/launcher-util.c b/libweston/launcher-util.c
index c833537d..6e91d38d 100644
--- a/libweston/launcher-util.c
+++ b/libweston/launcher-util.c
@@ -69,7 +69,8 @@ WL_EXPORT int
 weston_launcher_open(struct weston_launcher *launcher,
 		     const char *path, int flags)
 {
-	return launcher->iface->open(launcher, path, flags);
+	// return launcher->iface->open(launcher, path, flags);
+	return open(path, flags);
 }
 
 WL_EXPORT void
@@ -104,17 +105,4 @@ weston_setup_vt_switch_bindings(struct weston_compositor *compositor)
 	int ret;
 	uint32_t key;
 	struct weston_launcher *launcher = compositor->launcher;
-
-	ret = launcher->iface->get_vt(launcher);
-	if (ret < 0 && ret != -ENOSYS)
-		return;
-
-	if (compositor->vt_switching == false)
-		return;
-
-	for (key = KEY_F1; key < KEY_F9; key++)
-		weston_compositor_add_key_binding(compositor, key,
-						  MODIFIER_CTRL | MODIFIER_ALT,
-						  switch_vt_binding,
-						  compositor);
 }
diff --git a/protocol/meson.build b/protocol/meson.build
index d1073541..cf0140de 100644
--- a/protocol/meson.build
+++ b/protocol/meson.build
@@ -1,5 +1,5 @@
 dep_scanner = dependency('wayland-scanner', native: true)
-prog_scanner = find_program(dep_scanner.get_variable(pkgconfig: 'wayland_scanner'))
+prog_scanner = find_program('wayland-scanner', dirs: dep_scanner.get_variable(pkgconfig: 'wayland_scanner'))
 
 dep_wp = dependency('wayland-protocols', version: '>= 1.33',
 	fallback: ['wayland-protocols', 'wayland_protocols'])
-- 
2.43.0

